{"version":3,"sources":["webpack:///./src/layouts/External/External.css","webpack:///./src/modules/External/Slack/Slack.css?d4e7","webpack:///./src/modules/External/Slack/Slack.html","webpack:///./src/layouts/External/External.html","webpack:///./src/layouts/External/External.ts","webpack:///./src/layouts/External/index.vue","webpack:///./src/modules/External/Slack/Slack.ts","webpack:///./src/modules/External/Slack/index.vue","webpack:///./src/enums/HttpRequestMethod.ts","webpack:///./src/util/HttpClient.ts"],"names":["class","src","context","render","__scopeId","name","components","ExternalLayout","setup","store","data","pars","authToken","mounted","code","this","$route","query","getters","localStorageAuthToken","url","formdata","FormData","append","toString","HttpClient","request","HttpRequestMethod","POST","response","ok","Error","message","routes","push","params","actionOutcome","actionMessage","CHANNEL_ID","console","error","type","body","form","controller","AbortController","headers","Headers","requestOptions","method","cache","timeout","id","setTimeout","abort","fetch","signal","clone","json","catch","text","result","clearTimeout"],"mappings":"kHAAA,W,2DCAA,W,oECAKA,MAAM,2E,gDAAX,yBAEM,MAFN,EAEM,CADF,yBAAwC,OAAlCC,IAAQC,UAAL,mB,2ICDRF,MAAM,W,GACFA,MAAM,Q,GACDA,MAAM,W,GACHA,MAAM,6B,GACFA,MAAM,0B,qEAJ3B,yBAUM,MAVN,EAUM,CATF,yBAQM,MARN,EAQM,CAPF,yBAMO,OANP,EAMO,CALH,yBAIM,MAJN,EAIM,CAHF,yBAEM,MAFN,EAEM,CADF,wBAAQ,6CCJb,mCAAgB,I,UCI/B,EAAOG,OAAS,EAChB,EAAOC,UAAY,kBAEJ,Q,gDCDA,+BAAgB,CAC7BC,KAAM,QACNC,WAAY,CACVC,eAAc,GAEhBC,MAAK,WACH,IAAMC,EAAQ,iBACd,MAAO,CACLA,MAAK,IAGTC,KAAI,WACF,MAAO,CACLR,QAAS,SACTS,KAAM,GACNC,UAAW,OAGTC,QAAN,W,+JAEUC,EAAOC,KAAKC,OAAOC,MAAMH,KAC/BC,KAAKH,UAAYG,KAAKN,MAAMS,QAAQC,sBAChCL,GACIM,EAAM,uCACNC,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQT,EAAKU,YACZ,GAAMC,EAAA,KAAWC,QAChCN,EACAL,KAAKH,UACLe,EAAA,KAAkBC,KAClBP,GACA,KATA,M,OAWF,GAPMQ,EAAW,UAOZA,EAASC,GACZ,MAAM,IAAIC,MAASF,EAASG,QAAO,KAAKH,EAAS,iBAAgB,K,OAEnEI,EAAA,KAAOC,KAAK,CACV7B,KAAM,oBACN8B,OAAQ,CACNC,cAAe,UACfC,cAAe,qGAAqGR,EAASS,c,aAIjI,MAAM,IAAIP,MAAM,6B,4CAGlBQ,QAAQC,MAAM,GACdP,EAAA,KAAOC,KAAK,CACV7B,KAAM,oBACN8B,OAAQ,CAAEC,cAAe,QAASC,cAAe,EAAEb,c,2CCpD3D,EAAOrB,OAASA,EAED,gB,kCCPf,IAAYwB,EAAZ,2CAAYA,GACV,eACA,iBACA,eACA,qBAJF,CAAYA,MAAiB,M,yECEvBD,EAAU,SACdN,EACAR,EACA6B,EACAC,EACAC,GAAqB,uD,mFAcJ,OAZXC,EAAa,IAAIC,gBACjBC,EAAU,IAAIC,QACfJ,GAAMG,EAAQvB,OAAO,eAAgB,oBACtCX,GAAWkC,EAAQvB,OAAO,gBAAiB,SAASX,GAClDoC,EAAuC,CAC3CC,OAAQR,EACRK,QAAO,EACPI,MAAO,YAED,EAAmBF,EAAc,QAAjCG,OAAO,IAAG,MAAI,EAChBC,EAAKC,YAAW,WAAM,OAAAT,EAAWU,UAASH,GAC5CT,IAAMM,EAAe,QAAUN,GAClB,GAAMa,MAAMnC,EAAK,iCAC7B4B,GAAc,CACjBQ,OAAQZ,EAAWY,W,OAErB,GAJM3B,EAAW,UAIZA,EAASC,GAAI,MAAM,IAAIC,MAAM,wCAEnB,SAAMF,EAClB4B,QACAC,OACAC,OAAM,WAAM,OAAA9B,EAAS+B,W,OAExB,OALMC,EAAS,SAIfC,aAAaV,GACN,CAAP,EAAOS,WAGM,QACbnC,QAAO","file":"js/chunk-e69b37f4-legacy.2b6bfe8e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./External.css?vue&type=style&index=0&id=bb137160&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./Slack.css?vue&type=style&index=0&lang=css\"","<div class=\"d-flex flex-column min-vh-100 justify-content-center align-items-center\">\n    <img :src=\"`${context}img/loading.svg`\">\n</div>","<div class=\"wrapper\">\n    <div class=\"main\">\n        <main class=\"content\">\n            <div class=\"container-fluid p-0 h-100\">\n                <div class=\"row mb-2 mb-xl-3 h-100\">\n                    <slot />\n                </div>\n            </div>\n        </main>\n    </div>\n</div>","import { defineComponent } from \"vue\";\nexport default defineComponent({});\n","import { render } from \"./External.html?vue&type=template&id=bb137160&scoped=true\"\nimport script from \"./External.ts?vue&type=script&lang=ts\"\nexport * from \"./External.ts?vue&type=script&lang=ts\"\n\nimport \"./External.css?vue&type=style&index=0&id=bb137160&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-bb137160\"\n\nexport default script","import { defineComponent } from \"vue\";\nimport ExternalLayout from \"@/layouts/External/index.vue\";\nimport routes from \"@/routes\";\nimport HttpClient from \"@/util/HttpClient\";\nimport { HttpRequestMethod } from \"@/enums/HttpRequestMethod\";\nimport { useStore } from \"vuex\";\n\nexport default defineComponent({\n  name: \"Slack\",\n  components: {\n    ExternalLayout,\n  },\n  setup() {\n    const store = useStore();\n    return {\n      store,\n    };\n  },\n  data() {\n    return {\n      context: process.env.VUE_APP_CONTEXT,\n      pars: \"\",\n      authToken: null,\n    };\n  },\n  async mounted() {\n    try {\n      const code = this.$route.query.code;\n      this.authToken = this.store.getters.localStorageAuthToken;\n      if (code) {\n        const url = `https://${process.env.VUE_APP_BOTO_API_DOMAIN}/app/slack/oauth/`;\n        const formdata = new FormData();\n        formdata.append(\"code\", code.toString());\n        const response = await HttpClient.request(\n          url,\n          this.authToken!,\n          HttpRequestMethod.POST,\n          formdata,\n          true\n        );\n        if (!response.ok) {\n          throw new Error(`${response.message} (${response[\"slack-message\"]})`);\n        }\n        routes.push({\n          name: \"home.integrations\",\n          params: {\n            actionOutcome: \"success\",\n            actionMessage: `Yesss! You can now use Slack in your Botos :-) Please use the following channel_id for your Boto: ${response.CHANNEL_ID}`,\n          },\n        });\n      } else {\n        throw new Error(\"Could not authorize Slack\");\n      }\n    } catch (e: any) {\n      console.error(e);\n      routes.push({\n        name: \"home.integrations\",\n        params: { actionOutcome: \"error\", actionMessage: e.toString() },\n      });\n    }\n  },\n});\n","import { render } from \"./Slack.html?vue&type=template&id=4a9ab058\"\nimport script from \"./Slack.ts?vue&type=script&lang=ts\"\nexport * from \"./Slack.ts?vue&type=script&lang=ts\"\n\nimport \"./Slack.css?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","export enum HttpRequestMethod {\n  GET = \"get\",\n  POST = \"post\",\n  PUT = \"PUT\",\n  DELETE = \"DELETE\",\n}\n","import { HttpRequestMethod } from \"@/enums/HttpRequestMethod\";\n\nconst request = async (\n  url: string,\n  authToken: string | null,\n  type: HttpRequestMethod,\n  body?: unknown | null,\n  form?: boolean | null\n) => {\n  const controller = new AbortController();\n  const headers = new Headers();\n  if (!form) headers.append(\"Content-Type\", \"application/json\");\n  if (authToken) headers.append(\"Authorization\", `Token ${authToken}`);\n  const requestOptions: { [k: string]: any } = {\n    method: type,\n    headers,\n    cache: \"no-store\",\n  };\n  const { timeout = 8000 } = requestOptions;\n  const id = setTimeout(() => controller.abort(), timeout);\n  if (body) requestOptions[\"body\"] = body;\n  const response = await fetch(url, {\n    ...requestOptions,\n    signal: controller.signal,\n  });\n  if (!response.ok) throw new Error(\"There was an error with this request\");\n  // TODO: workaround to fix API issue\n  const result = await response\n    .clone()\n    .json()\n    .catch(() => response.text());\n  clearTimeout(id);\n  return result;\n};\n\nexport default {\n  request,\n};\n"],"sourceRoot":""}