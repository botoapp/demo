{"version":3,"sources":["webpack:///./src/layouts/External/External.css","webpack:///./src/modules/External/Slack/Slack.css?fb9a","webpack:///./src/modules/External/Slack/Slack.html","webpack:///./src/layouts/External/External.html","webpack:///./src/layouts/External/External.ts","webpack:///./src/layouts/External/index.vue","webpack:///./src/modules/External/Slack/Slack.ts","webpack:///./src/modules/External/Slack/index.vue","webpack:///./src/enums/HttpRequestMethod.ts","webpack:///./src/util/HttpClient.ts"],"names":["_hoisted_1","class","_hoisted_2","render","_ctx","_cache","src","context","_hoisted_3","_hoisted_4","_hoisted_5","$slots","undefined","__exports__","name","components","ExternalLayout","setup","store","data","pars","authToken","mounted","code","this","$route","query","getters","localStorageAuthToken","url","formdata","FormData","append","toString","HttpClient","request","HttpRequestMethod","POST","response","ok","Error","message","routes","push","params","actionOutcome","actionMessage","CHANNEL_ID","console","error","type","body","form","controller","AbortController","headers","Headers","requestOptions","method","cache","timeout","id","setTimeout","abort","fetch","signal","status","clone","json","catch","text","result","clearTimeout","getTextError","e"],"mappings":"kHAAA,W,2DCAA,W,2DCEMA,EAAa,CAAEC,MAAO,2EACtBC,EAAa,CAAC,OAEb,SAASC,EAAOC,EAAMC,GAC3B,OAAQ,yBAAc,gCAAoB,MAAOL,EAAY,CAC3D,gCAAoB,MAAO,CACzBM,IAAQF,EAAKG,QAAO,mBACnB,KAAM,EAAGL,K,gBCNV,EAAa,CAAED,MAAO,WACtB,EAAa,CAAEA,MAAO,QACtBO,EAAa,CAAEP,MAAO,WACtBQ,EAAa,CAAER,MAAO,6BACtBS,EAAa,CAAET,MAAO,0BAErB,SAAS,EAAOG,EAAMC,GAC3B,OAAQ,yBAAc,gCAAoB,MAAO,EAAY,CAC3D,gCAAoB,MAAO,EAAY,CACrC,gCAAoB,OAAQG,EAAY,CACtC,gCAAoB,MAAOC,EAAY,CACrC,gCAAoB,MAAOC,EAAY,CACrC,wBAAYN,EAAKO,OAAQ,UAAW,QAAIC,GAAW,aCdhD,mCAAgB,I,iCCM/B,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAE1E,Q,gDCFA,+BAAgB,CAC7BC,KAAM,QACNC,WAAY,CACVC,eAAc,GAEhBC,MAAK,WACH,IAAMC,EAAQ,iBACd,MAAO,CACLA,MAAK,IAGTC,KAAI,WACF,MAAO,CACLZ,QAAS,SACTa,KAAM,GACNC,UAAW,OAGTC,QAAN,W,+JAEUC,EAAOC,KAAKC,OAAOC,MAAMH,KAC/BC,KAAKH,UAAYG,KAAKN,MAAMS,QAAQC,sBAChCL,GACIM,EAAM,uCACNC,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQT,EAAKU,YACZ,GAAMC,EAAA,KAAWC,QAChCN,EACAL,KAAKH,UACLe,EAAA,KAAkBC,KAClBP,GACA,KATA,M,OAWF,GAPMQ,EAAW,UAOZA,EAASC,GACZ,MAAM,IAAIC,MAASF,EAASG,QAAO,KAAKH,EAAS,iBAAgB,K,OAEnEI,EAAA,KAAOC,KAAK,CACV7B,KAAM,oBACN8B,OAAQ,CACNC,cAAe,UACfC,cAAe,qGAAqGR,EAASS,c,aAIjI,MAAM,IAAIP,MAAM,6B,4CAGlBQ,QAAQC,MAAM,GACdP,EAAA,KAAOC,KAAK,CACV7B,KAAM,oBACN8B,OAAQ,CAAEC,cAAe,QAASC,cAAe,EAAEb,c,2CClD3D,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS9B,KAErD,gB,kCCTf,IAAYiC,EAAZ,2CAAYA,GACV,eACA,iBACA,eACA,qBAJF,CAAYA,MAAiB,M,yECEvBD,EAAU,SACdN,EACAR,EACA6B,EACAC,EACAC,GAAqB,uD,mFAcJ,OAZXC,EAAa,IAAIC,gBACjBC,EAAU,IAAIC,QACfJ,GAAMG,EAAQvB,OAAO,eAAgB,oBACtCX,GAAWkC,EAAQvB,OAAO,gBAAiB,SAASX,GAClDoC,EAAuC,CAC3CC,OAAQR,EACRK,QAAO,EACPI,MAAO,YAED,EAAmBF,EAAc,QAAjCG,OAAO,IAAG,MAAI,EAChBC,EAAKC,YAAW,WAAM,OAAAT,EAAWU,UAASH,GAC5CT,IAAMM,EAAe,QAAUN,GAClB,GAAMa,MAAMnC,EAAK,iCAC7B4B,GAAc,CACjBQ,OAAQZ,EAAWY,W,OAErB,GAJM3B,EAAW,UAIZA,EAASC,GAAI,MAAM,IAAIC,MAAM,yCAAyCF,EAAS4B,OAAM,KAE3E,SAAM5B,EAClB6B,QACAC,OACAC,OAAM,WAAM,OAAA/B,EAASgC,W,OAExB,OALMC,EAAS,SAIfC,aAAaX,GACN,CAAP,EAAOU,WAGHE,EAAe,SAACC,GACpB,MAAkB,eAAXA,EAAE5D,KACL,uFACA4D,EAAEjC,SAGO,QACbN,QAAO,EACPsC,aAAY","file":"js/chunk-e69b37f4-legacy.0754d140.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!./External.css?vue&type=style&index=0&id=bb137160&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!./Slack.css?vue&type=style&index=0&lang=css\"","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"d-flex flex-column min-vh-100 justify-content-center align-items-center\" }\nconst _hoisted_2 = [\"src\"]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"img\", {\n      src: `${_ctx.context}img/loading.svg`\n    }, null, 8, _hoisted_2)\n  ]))\n}","import { renderSlot as _renderSlot, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-bb137160\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"wrapper\" }\nconst _hoisted_2 = { class: \"main\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = { class: \"container-fluid p-0 h-100\" }\nconst _hoisted_5 = { class: \"row mb-2 mb-xl-3 h-100\" }\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"main\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _renderSlot(_ctx.$slots, \"default\", {}, undefined, true)\n          ])\n        ])\n      ])\n    ])\n  ]))\n}","import { defineComponent } from \"vue\";\nexport default defineComponent({});\n","import { render } from \"./External.html?vue&type=template&id=bb137160&scoped=true&ts=true\"\nimport script from \"./External.ts?vue&type=script&lang=ts\"\nexport * from \"./External.ts?vue&type=script&lang=ts\"\n\nimport \"./External.css?vue&type=style&index=0&id=bb137160&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/javiromero/Documents/dev/boto/v1/boto/web_client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bb137160\"]])\n\nexport default __exports__","import { defineComponent } from \"vue\";\nimport ExternalLayout from \"@/layouts/External/index.vue\";\nimport routes from \"@/routes\";\nimport HttpClient from \"@/util/HttpClient\";\nimport { HttpRequestMethod } from \"@/enums/HttpRequestMethod\";\nimport { useStore } from \"vuex\";\n\nexport default defineComponent({\n  name: \"Slack\",\n  components: {\n    ExternalLayout,\n  },\n  setup() {\n    const store = useStore();\n    return {\n      store,\n    };\n  },\n  data() {\n    return {\n      context: process.env.VUE_APP_CONTEXT,\n      pars: \"\",\n      authToken: null,\n    };\n  },\n  async mounted() {\n    try {\n      const code = this.$route.query.code;\n      this.authToken = this.store.getters.localStorageAuthToken;\n      if (code) {\n        const url = `https://${process.env.VUE_APP_BOTO_API_DOMAIN}/app/slack/oauth/`;\n        const formdata = new FormData();\n        formdata.append(\"code\", code.toString());\n        const response = await HttpClient.request(\n          url,\n          this.authToken!,\n          HttpRequestMethod.POST,\n          formdata,\n          true\n        );\n        if (!response.ok) {\n          throw new Error(`${response.message} (${response[\"slack-message\"]})`);\n        }\n        routes.push({\n          name: \"home.integrations\",\n          params: {\n            actionOutcome: \"success\",\n            actionMessage: `Yesss! You can now use Slack in your Botos :-) Please use the following channel_id for your Boto: ${response.CHANNEL_ID}`,\n          },\n        });\n      } else {\n        throw new Error(\"Could not authorize Slack\");\n      }\n    } catch (e: any) {\n      console.error(e);\n      routes.push({\n        name: \"home.integrations\",\n        params: { actionOutcome: \"error\", actionMessage: e.toString() },\n      });\n    }\n  },\n});\n","import { render } from \"./Slack.html?vue&type=template&id=4a9ab058&ts=true\"\nimport script from \"./Slack.ts?vue&type=script&lang=ts\"\nexport * from \"./Slack.ts?vue&type=script&lang=ts\"\n\nimport \"./Slack.css?vue&type=style&index=0&lang=css\"\n\nimport exportComponent from \"/Users/javiromero/Documents/dev/boto/v1/boto/web_client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export enum HttpRequestMethod {\n  GET = \"get\",\n  POST = \"post\",\n  PUT = \"put\",\n  DELETE = \"delete\",\n}\n","import { HttpRequestMethod } from \"@/enums/HttpRequestMethod\";\n\nconst request = async (\n  url: string,\n  authToken: string | null,\n  type: HttpRequestMethod,\n  body?: unknown | null,\n  form?: boolean | null\n) => {\n  const controller = new AbortController();\n  const headers = new Headers();\n  if (!form) headers.append(\"Content-Type\", \"application/json\");\n  if (authToken) headers.append(\"Authorization\", `Token ${authToken}`);\n  const requestOptions: { [k: string]: any } = {\n    method: type,\n    headers,\n    cache: \"no-store\",\n  };\n  const { timeout = 8000 } = requestOptions;\n  const id = setTimeout(() => controller.abort(), timeout);\n  if (body) requestOptions[\"body\"] = body;\n  const response = await fetch(url, {\n    ...requestOptions,\n    signal: controller.signal,\n  });\n  if (!response.ok) throw new Error(`There was an error with this request (${response.status})`);\n  // TODO: workaround to fix API issue\n  const result = await response\n    .clone()\n    .json()\n    .catch(() => response.text());\n  clearTimeout(id);\n  return result;\n};\n\nconst getTextError = (e: any) => {\n  return e.name === \"AbortError\"\n    ? \"The request took too long, please check your Internet connection or try again later.\"\n    : e.message;\n};\n\nexport default {\n  request,\n  getTextError,\n};\n"],"sourceRoot":""}